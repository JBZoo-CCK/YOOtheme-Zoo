/* Copyright (C) YOOtheme GmbH, http://www.gnu.org/licenses/gpl.html GNU/GPL */

function selectZooItem(id,name,object){jQuery("#"+object+"_id").val(id);jQuery("#"+object+"_name").val(name);if(SqueezeBox.close){SqueezeBox.close()}else{$("sbox-window").close()}}(function($){var Plugin=function(){};$.extend(Plugin.prototype,{name:"ZooApplication",options:{url:null,msgSelectItem:"Select Item"},initialize:function(input,options){this.options=$.extend({},this.options,options);var $this=this;this.input=input;this.app=input.find("select.application");this.categories=input.find("div.categories");this.types=input.find("div.types");this.item=input.find("div.item");var mode=input.find("select.mode");if(mode.length){this.mode=mode.val();mode.bind("change",function(){$this.mode=mode.val();$this.setValues()})}else if(this.categories.length){this.mode="categories"}else if(this.types.length){this.mode="types"}else if(this.item.length){this.mode="item"}this.setValues();this.app.bind("change",function(){$this.setValues();if($this.item.length){$this.item.find("input:hidden").val("");$this.item.find("input:text").val($this.options.msgSelectItem)}});input.delegate("select","change",function(){$(this).closest("div.content").css("height","")});$(input.closest("form")).find("input[id$=mode]:hidden, input[id$=params_type]:hidden, input[id$=params_category]:hidden, input[id$=params_item_id]:hidden").each(function(){$(this).closest(".control-group").remove().end().remove()})},setValues:function(){var id=this.app.val();if(this.categories.length){if(id&&this.mode=="categories"){this.categories.removeClass("hidden")}else{this.categories.addClass("hidden")}this.input.find("select.category").each(function(){var category=$(this);if(category.hasClass("app-"+id)){category.removeClass("hidden").attr("name",category.data("category")).next(".chzn-container").removeClass("hidden")}else{category.addClass("hidden").attr("name","").next(".chzn-container").addClass("hidden")}})}if(this.types.length){if(id&&this.mode=="types"){this.types.removeClass("hidden")}else{this.types.addClass("hidden")}this.input.find("select.type").each(function(){var type=$(this);if(type.hasClass("app-"+id)){type.removeClass("hidden").attr("name",type.data("type")).next(".chzn-container").removeClass("hidden")}else{type.addClass("hidden").attr("name","").next(".chzn-container").addClass("hidden")}})}if(this.item.length){if(id&&this.mode=="item"){this.item.removeClass("hidden")}else{this.item.addClass("hidden")}this.item.find("a").attr("href",this.options.url+"&app_id="+id)}}});$.fn[Plugin.prototype.name]=function(){var args=arguments;var method=args[0]?args[0]:null;return this.each(function(){var element=$(this);if(Plugin.prototype[method]&&element.data(Plugin.prototype.name)&&method!="initialize"){element.data(Plugin.prototype.name)[method].apply(element.data(Plugin.prototype.name),Array.prototype.slice.call(args,1))}else if(!method||$.isPlainObject(method)){var plugin=new Plugin;if(Plugin.prototype["initialize"]){plugin.initialize.apply(plugin,$.merge([element],args))}element.data(Plugin.prototype.name,plugin)}else{$.error("Method "+method+" does not exist on jQuery."+Plugin.name)}})}})(jQuery);