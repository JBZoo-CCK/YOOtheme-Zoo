/* Copyright (C) YOOtheme GmbH, http://www.gnu.org/licenses/gpl.html GNU/GPL */

(function(t){var e=function(){};t.extend(e.prototype,{name:"ZooSubmission",initialize:function(e){var n=this;this.input=e;this.app=e.find('[data-type="application"]');this.submissions=e.find('[data-type="submission"]');this.types=e.find('[data-type="type"]');this.setValues();this.app.bind("change",function(){n.setValues()});this.submissions.bind("change",function(){n.setValues()});e.delegate("select","change",function(){t(this).closest("div.content").css("height","")});t(e.closest("form")).find("input[id$=params_type]:hidden, input[id$=params_submission]:hidden").each(function(){t(this).closest(".control-group").remove().end().remove()})},setValues:function(){var e=this.app.val();if(e){var n=null;this.submissions.each(function(){var a=t(this);if(a.data("app")==e){a.removeClass("hidden").attr("name",a.data("control")).next(".chzn-container").removeClass("hidden");n=a.val()}else{a.addClass("hidden").attr("name","").next(".chzn-container").addClass("hidden")}});this.types.each(function(){var a=t(this);if(a.data("app")==e&&a.data("submission")==n){a.removeClass("hidden").attr("name",a.data("control")).next(".chzn-container").removeClass("hidden")}else{a.addClass("hidden").attr("name","").next(".chzn-container").addClass("hidden")}})}else{this.input.find('[data-type="submission"], [data-type="type"]').each(function(){t(this).addClass("hidden").attr("name","").next(".chzn-container").addClass("hidden")})}}});t.fn[e.prototype.name]=function(){var n=arguments;var a=n[0]?n[0]:null;return this.each(function(){var i=t(this);if(e.prototype[a]&&i.data(e.prototype.name)&&a!="initialize"){i.data(e.prototype.name)[a].apply(i.data(e.prototype.name),Array.prototype.slice.call(n,1))}else if(!a||t.isPlainObject(a)){var s=new e;if(e.prototype["initialize"]){s.initialize.apply(s,t.merge([i],n))}i.data(e.prototype.name,s)}else{t.error("Method "+a+" does not exist on jQuery."+e.name)}})}})(jQuery);