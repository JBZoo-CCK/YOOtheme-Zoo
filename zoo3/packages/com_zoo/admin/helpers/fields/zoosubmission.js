/* Copyright (C) YOOtheme GmbH, http://www.gnu.org/licenses/gpl.html GNU/GPL */

(function($){var Plugin=function(){};$.extend(Plugin.prototype,{name:"ZooSubmission",initialize:function(input){var $this=this;this.input=input;this.app=input.find('[data-type="application"]');this.submissions=input.find('[data-type="submission"]');this.types=input.find('[data-type="type"]');this.setValues();this.app.bind("change",function(){$this.setValues()});this.submissions.bind("change",function(){$this.setValues()});input.delegate("select","change",function(){$(this).closest("div.content").css("height","")});$(input.closest("form")).find("input[id$=params_type]:hidden, input[id$=params_submission]:hidden").each(function(){$(this).closest(".control-group").remove().end().remove()})},setValues:function(){var app_id=this.app.val();if(app_id){var submission_id=null;this.submissions.each(function(){var submission=$(this);if(submission.data("app")==app_id){submission.removeClass("hidden").attr("name",submission.data("control")).next(".chzn-container").removeClass("hidden");submission_id=submission.val()}else{submission.addClass("hidden").attr("name","").next(".chzn-container").addClass("hidden")}});this.types.each(function(){var type=$(this);if(type.data("app")==app_id&&type.data("submission")==submission_id){type.removeClass("hidden").attr("name",type.data("control")).next(".chzn-container").removeClass("hidden")}else{type.addClass("hidden").attr("name","").next(".chzn-container").addClass("hidden")}})}else{this.input.find('[data-type="submission"], [data-type="type"]').each(function(){$(this).addClass("hidden").attr("name","").next(".chzn-container").addClass("hidden")})}}});$.fn[Plugin.prototype.name]=function(){var args=arguments;var method=args[0]?args[0]:null;return this.each(function(){var element=$(this);if(Plugin.prototype[method]&&element.data(Plugin.prototype.name)&&method!="initialize"){element.data(Plugin.prototype.name)[method].apply(element.data(Plugin.prototype.name),Array.prototype.slice.call(args,1))}else if(!method||$.isPlainObject(method)){var plugin=new Plugin;if(Plugin.prototype["initialize"]){plugin.initialize.apply(plugin,$.merge([element],args))}element.data(Plugin.prototype.name,plugin)}else{$.error("Method "+method+" does not exist on jQuery."+Plugin.name)}})}})(jQuery);