/* Copyright (C) YOOtheme GmbH, http://www.gnu.org/licenses/gpl.html GNU/GPL */

jQuery(function($){var JRoot=location.href.match(/^(.+)administrator\/index\.php.*/i)[1];$("input.image-select").each(function(i){var input=$(this);var id="image-select-"+i;var button=$('<button type="button">').text("Select Image").insertAfter(input);var cancel=$("<span>").addClass("image-cancel").insertAfter(input);var preview=$("<div>").addClass("image-preview").insertAfter(button);input.attr("id",id);if(input.val()){$("<img>").attr("src",JRoot+input.val()).appendTo(preview)}cancel.click(function(){input.val("");preview.empty()});button.click(function(event){event.preventDefault();SqueezeBox.fromElement(this,{handler:"iframe",url:"index.php?option=com_media&view=images&tmpl=component&e_name="+id,size:{x:800,y:500}})})});if($.isFunction(window.jInsertEditorText)){window.insertTextOld=window.jInsertEditorText}window.jInsertEditorText=function(text,editor){if(editor.match(/^image-select-/)){var input=$("#"+editor);var src=text.match(/src="([^\"]*)"/)[1];var preview=input.parent().find("div.image-preview").html(text);var image=preview.find("img");image.attr("src",JRoot+src);input.val(src)}else if($.isFunction(window.insertTextOld)){window.insertTextOld(text,editor)}}});