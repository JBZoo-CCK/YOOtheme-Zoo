/* Copyright (C) YOOtheme GmbH, http://www.gnu.org/licenses/gpl.html GNU/GPL */

!function(e){var a=function(){};e.extend(a.prototype,{name:"SortCategories",initialize:function(a){var t=e("#categories");if(!t){return}t.nestedSortable({forcePlaceholderSize:true,handle:"td.handle",items:"li",placeholder:"placeholder",tabSize:25,tolerance:"pointer",toleranceElement:"> div",listType:"ul",start:function(e,a){a.placeholder.height(a.helper.height()-2);a.helper.addClass("drag")},stop:function(i,o){var l={};e.each(a.serializeArray(),function(e,a){l[a.name]=a.value});o.item.addClass("loader").find("li").addClass("loader");e.post(a.attr("action"),e.param(e.extend(l,{task:"saveorder",format:"raw"}))+"&"+t.nestedSortable("serialize"),function(i){t.find("li").removeClass("loader");e.Message(i,true);a.BrowseCategories("markCollapsibles")});o.item.removeClass("drag")}})}});e.fn[a.prototype.name]=function(){var t=arguments;var i=t[0]?t[0]:null;return this.each(function(){var o=e(this);if(a.prototype[i]&&o.data(a.prototype.name)&&i!="initialize"){o.data(a.prototype.name)[i].apply(o.data(a.prototype.name),Array.prototype.slice.call(t,1))}else if(!i||e.isPlainObject(i)){var l=new a;if(a.prototype["initialize"]){l.initialize.apply(l,e.merge([o],t))}o.data(a.prototype.name,l)}else{e.error("Method "+i+" does not exist on jQuery."+a.name)}})}}(jQuery);!function(e){var a=function(){};e.extend(a.prototype,{name:"BrowseCategories",initialize:function(a){var t=this;e("#categories").delegate("li.collapsible > div td.icon","click",function(){var a=e(this).closest("li");if(a.is(".collapsed")){a.removeClass("collapsed").children("ul").show()}else{a.addClass("collapsed").children("ul").hide()}});e("#categories-list .collapse-all").bind("click",function(){e("#categories li.collapsible").each(function(){e(this).addClass("collapsed").children("ul").hide()})});e("#categories-list .expand-all").bind("click",function(){e("#categories li.collapsible").each(function(){e(this).removeClass("collapsed").children("ul").show()})});t.markCollapsibles()},markCollapsibles:function(){e("#categories").find("li").each(function(){e(this).removeClass("collapsible");if(e(this).has("ul").length){e(this).addClass("collapsible")}})}});e.fn[a.prototype.name]=function(){var t=arguments;var i=t[0]?t[0]:null;return this.each(function(){var o=e(this);if(a.prototype[i]&&o.data(a.prototype.name)&&i!="initialize"){o.data(a.prototype.name)[i].apply(o.data(a.prototype.name),Array.prototype.slice.call(t,1))}else if(!i||e.isPlainObject(i)){var l=new a;if(a.prototype["initialize"]){l.initialize.apply(l,e.merge([o],t))}o.data(a.prototype.name,l)}else{e.error("Method "+i+" does not exist on jQuery."+a.name)}})}}(jQuery);!function(e){var a=function(){};e.extend(a.prototype,{name:"EditCategory",initialize:function(a){e.each(["apply","save","save-new"],function(t,i){e("#toolbar-"+i+" a, #toolbar-"+i+" button").bind("validate.adminForm",function(e){if(a.find('input[name="name"]').val()==""){a.find("span.message-name").css("display","block");e.preventDefault()}})})}});e.fn[a.prototype.name]=function(){var t=arguments;var i=t[0]?t[0]:null;return this.each(function(){var o=e(this);if(a.prototype[i]&&o.data(a.prototype.name)&&i!="initialize"){o.data(a.prototype.name)[i].apply(o.data(a.prototype.name),Array.prototype.slice.call(t,1))}else if(!i||e.isPlainObject(i)){var l=new a;if(a.prototype["initialize"]){l.initialize.apply(l,e.merge([o],t))}o.data(a.prototype.name,l)}else{e.error("Method "+i+" does not exist on jQuery."+a.name)}})}}(jQuery);