/* Copyright (C) YOOtheme GmbH, http://www.gnu.org/licenses/gpl.html GNU/GPL */

!function(e){var t=function(){};t.prototype=e.extend(t.prototype,{name:"ElementDownload",options:{url:""},initialize:function(t,i){this.options=e.extend({},this.options,i);var n=this;t.find('input[name="reset-hits"]').bind("click",function(){e.ajax({url:n.options.url+"&task=callelement&method=reset",success:function(e){t.replaceWith(e)}})})}});e.fn[t.prototype.name]=function(){var i=arguments;var n=i[0]?i[0]:null;return this.each(function(){var a=e(this);if(t.prototype[n]&&a.data(t.prototype.name)&&n!="initialize"){a.data(t.prototype.name)[n].apply(a.data(t.prototype.name),Array.prototype.slice.call(i,1))}else if(!n||e.isPlainObject(n)){var o=new t;if(t.prototype["initialize"]){o.initialize.apply(o,e.merge([a],i))}a.data(t.prototype.name,o)}else{e.error("Method "+n+" does not exist on jQuery."+t.name)}})}}(jQuery);!function(e){var t=function(){};t.prototype=e.extend(t.prototype,{name:"DownloadSubmission",initialize:function(e){var t=this;this.element=e;this.advanced=e.find("select.upload");this.select_upload=this.advanced.length?this.advanced:e.find("input.upload");e.find("span.download-cancel").bind("click",function(){t.select_upload.val("");e.find("div.download-limit input").val("");t.sanatize()});if(this.advanced.length){this.select_upload.bind("change",function(){e.find("span.preview").text(t.select_upload.val().replace(/^.*[\/\\]/g,""));t.sanatize()})}t.sanatize()},sanatize:function(){if(this.select_upload.val()){this.element.find("div.download-select").addClass("hidden");this.element.find("div.download-preview").removeClass("hidden")}else{this.element.find("div.download-select").removeClass("hidden");this.element.find("div.download-preview").addClass("hidden")}}});e.fn[t.prototype.name]=function(){var i=arguments;var n=i[0]?i[0]:null;return this.each(function(){var a=e(this);if(t.prototype[n]&&a.data(t.prototype.name)&&n!="initialize"){a.data(t.prototype.name)[n].apply(a.data(t.prototype.name),Array.prototype.slice.call(i,1))}else if(!n||e.isPlainObject(n)){var o=new t;if(t.prototype["initialize"]){o.initialize.apply(o,e.merge([a],i))}a.data(t.prototype.name,o)}else{e.error("Method "+n+" does not exist on jQuery."+t.name)}})}}(jQuery);