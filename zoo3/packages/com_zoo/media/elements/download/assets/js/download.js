/* Copyright (C) YOOtheme GmbH, http://www.gnu.org/licenses/gpl.html GNU/GPL */

(function($){var Plugin=function(){};Plugin.prototype=$.extend(Plugin.prototype,{name:"ElementDownload",options:{url:""},initialize:function(element,options){this.options=$.extend({},this.options,options);var $this=this;element.find('input[name="reset-hits"]').bind("click",function(){$.ajax({url:$this.options.url+"&task=callelement&method=reset",success:function(data){element.replaceWith(data)}})})}});$.fn[Plugin.prototype.name]=function(){var args=arguments;var method=args[0]?args[0]:null;return this.each(function(){var element=$(this);if(Plugin.prototype[method]&&element.data(Plugin.prototype.name)&&method!="initialize"){element.data(Plugin.prototype.name)[method].apply(element.data(Plugin.prototype.name),Array.prototype.slice.call(args,1))}else if(!method||$.isPlainObject(method)){var plugin=new Plugin;if(Plugin.prototype["initialize"]){plugin.initialize.apply(plugin,$.merge([element],args))}element.data(Plugin.prototype.name,plugin)}else{$.error("Method "+method+" does not exist on jQuery."+Plugin.name)}})}})(jQuery);(function($){var Plugin=function(){};Plugin.prototype=$.extend(Plugin.prototype,{name:"DownloadSubmission",initialize:function(element){var $this=this;this.element=element;this.advanced=element.find("select.upload");this.select_upload=this.advanced.length?this.advanced:element.find("input.upload");element.find("span.download-cancel").bind("click",function(){$this.select_upload.val("");element.find("div.download-limit input").val("");$this.sanatize()});if(this.advanced.length){this.select_upload.bind("change",function(){element.find("span.preview").text($this.select_upload.val().replace(/^.*[\/\\]/g,""));$this.sanatize()})}$this.sanatize()},sanatize:function(){if(this.select_upload.val()){this.element.find("div.download-select").addClass("hidden");this.element.find("div.download-preview").removeClass("hidden")}else{this.element.find("div.download-select").removeClass("hidden");this.element.find("div.download-preview").addClass("hidden")}}});$.fn[Plugin.prototype.name]=function(){var args=arguments;var method=args[0]?args[0]:null;return this.each(function(){var element=$(this);if(Plugin.prototype[method]&&element.data(Plugin.prototype.name)&&method!="initialize"){element.data(Plugin.prototype.name)[method].apply(element.data(Plugin.prototype.name),Array.prototype.slice.call(args,1))}else if(!method||$.isPlainObject(method)){var plugin=new Plugin;if(Plugin.prototype["initialize"]){plugin.initialize.apply(plugin,$.merge([element],args))}element.data(Plugin.prototype.name,plugin)}else{$.error("Method "+method+" does not exist on jQuery."+Plugin.name)}})}})(jQuery);