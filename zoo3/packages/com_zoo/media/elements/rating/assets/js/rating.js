/* Copyright (C) YOOtheme GmbH, http://www.gnu.org/licenses/gpl.html GNU/GPL */

(function($){var Plugin=function(){};$.extend(Plugin.prototype,{name:"ElementRating",options:{url:null},initialize:function(element,options){this.options=$.extend({},this.options,options);var $this=this;var stars=element.find("div.stars");stars.each(function(i){$(this).bind("click",function(){var value=stars.length-i;$.ajax({url:$this.options.url,data:{method:"vote","args[0]":value},type:"post",datatype:"json",success:function(data){var options=$.parseJSON(data);var width=options.value;if(width>0)element.find("div.previous-rating").css("width",width+"%");element.find("div.vote-message").text(options.message)}})}).bind("mouseenter",function(){$(this).addClass("hover")}).bind("mouseleave",function(){$(this).removeClass("hover")})})}});$.fn[Plugin.prototype.name]=function(){var args=arguments;var method=args[0]?args[0]:null;return this.each(function(){var element=$(this);if(Plugin.prototype[method]&&element.data(Plugin.prototype.name)&&method!="initialize"){element.data(Plugin.prototype.name)[method].apply(element.data(Plugin.prototype.name),Array.prototype.slice.call(args,1))}else if(!method||$.isPlainObject(method)){var plugin=new Plugin;if(Plugin.prototype["initialize"]){plugin.initialize.apply(plugin,$.merge([element],args))}element.data(Plugin.prototype.name,plugin)}else{$.error("Method "+method+" does not exist on jQuery."+Plugin.name)}})}})(jQuery);(function($){var Plugin=function(){};$.extend(Plugin.prototype,{name:"EditElementRating",options:{url:null},initialize:function(element,options){this.options=$.extend({},this.options,options);var $this=this;element.find('input[name="reset-rating"]').bind("click",function(){$.ajax({url:$this.options.url+"&task=callelement&method=reset",success:function(data){element.replaceWith(data)}})})}});$.fn[Plugin.prototype.name]=function(){var args=arguments;var method=args[0]?args[0]:null;return this.each(function(){var element=$(this);if(Plugin.prototype[method]&&element.data(Plugin.prototype.name)&&method!="initialize"){element.data(Plugin.prototype.name)[method].apply(element.data(Plugin.prototype.name),Array.prototype.slice.call(args,1))}else if(!method||$.isPlainObject(method)){var plugin=new Plugin;if(Plugin.prototype["initialize"]){plugin.initialize.apply(plugin,$.merge([element],args))}element.data(Plugin.prototype.name,plugin)}else{$.error("Method "+method+" does not exist on jQuery."+Plugin.name)}})}})(jQuery);