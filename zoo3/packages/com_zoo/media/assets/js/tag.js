/* Copyright (C) YOOtheme GmbH, http://www.gnu.org/licenses/gpl.html GNU/GPL */

!function(t){var e=function(){};t.extend(e.prototype,{name:"BrowseTags",options:{msgSave:"Save",msgCancel:"Cancel"},initialize:function(e,n){this.options=t.extend({},this.options,n);var a=this;this.input=e,e.find("span.edit-tag a").bind("click",function(){var e=t(this);a.removePanel(),e.hide();var n=t("<span>").addClass("edit-tag-panel").insertAfter(e);t('<input class="text" type="text" name="new">').val(e.text()).appendTo(n).focus().bind("keydown",function(t){13==t.which&&(t.stopPropagation(),a.submit()),27==t.which&&(t.stopPropagation(),a.removePanel())}),t('<input type="hidden" name="old">').val(e.text()).appendTo(n),t("<button>").addClass("save").text(a.options.msgSave).appendTo(n).bind("click",function(){a.submit()}),t("<a>").addClass("cancel").text(a.options.msgCancel).appendTo(n).bind("click",function(){a.removePanel()})})},removePanel:function(){this.input.find("span.edit-tag-panel").each(function(){t(this).parent().find("a").show(),t(this).remove()})},submit:function(){this.input.find('input[name="task"]').val("update"),this.input.submit()}}),t.fn[e.prototype.name]=function(){var n=arguments,a=n[0]?n[0]:null;return this.each(function(){var i=t(this);if(e.prototype[a]&&i.data(e.prototype.name)&&"initialize"!=a)i.data(e.prototype.name)[a].apply(i.data(e.prototype.name),Array.prototype.slice.call(n,1));else if(!a||t.isPlainObject(a)){var o=new e;e.prototype.initialize&&o.initialize.apply(o,t.merge([i],n)),i.data(e.prototype.name,o)}else t.error("Method "+a+" does not exist on jQuery."+e.name)})}}(jQuery),function(t){var e=function(){};t.extend(e.prototype,{name:"Tag",options:{url:"",addButtonText:"Add Tag"},initialize:function(e,n){this.options=t.extend({},this.options,n);var a,i=this,o={};this.tagArea=e,this.tagInput=e.find('input[type="text"]'),this.tagInput.autosuggest(t.extend({allowDuplicates:!1,inputName:"tags[]",prefill:this.tagInput.val()!=this.tagInput.attr("placeholder")?this.tagInput.val():"",source:function(e,n){var p=e.term;return p in o?void n(o[p]):void(a=t.getJSON(i.options.url,{tag:p},function(t,e,i){o[p]=t,i===a&&n(t)}))}},this.options)).bind("keydown",function(t){switch(t.which){case 13:t.preventDefault(),i.tagInput.autosuggest("addItem",i.tagInput.val())}}).placeholder(),e.delegate("div.tag-cloud a","click",function(){i.tagInput.autosuggest("addItem",t(this).text()),i.tagInput.trigger("blur.placeholder")})}}),t.fn[e.prototype.name]=function(){var n=arguments,a=n[0]?n[0]:null;return this.each(function(){var i=t(this);if(e.prototype[a]&&i.data(e.prototype.name)&&"initialize"!=a)i.data(e.prototype.name)[a].apply(i.data(e.prototype.name),Array.prototype.slice.call(n,1));else if(!a||t.isPlainObject(a)){var o=new e;e.prototype.initialize&&o.initialize.apply(o,t.merge([i],n)),i.data(e.prototype.name,o)}else t.error("Method "+a+" does not exist on jQuery."+e.name)})}}(jQuery);