/* Copyright (C) YOOtheme GmbH, http://www.gnu.org/licenses/gpl.html GNU/GPL */

(function(e){var i=function(){};e.extend(i.prototype,{name:"ImageSubmission",options:{uri:""},initialize:function(i,t){this.options=e.extend({},this.options,t);var n=this;this.element=i;this.advanced=i.find("select.image");this.select_image=this.advanced.length?this.advanced:i.find("input.image");i.find("span.image-cancel").bind("click",function(){n.select_image.val("");n.sanatize()});if(this.advanced.length){this.select_image.bind("change",function(){i.find("img").attr("src",n.options.uri+n.select_image.val());n.sanatize()})}n.sanatize()},sanatize:function(){if(this.select_image.val()){this.element.find("div.image-select").addClass("hidden");this.element.find("div.image-preview").removeClass("hidden")}else{this.element.find("div.image-select").removeClass("hidden");this.element.find("div.image-preview").addClass("hidden")}}});e.fn[i.prototype.name]=function(){var t=arguments;var n=t[0]?t[0]:null;return this.each(function(){var a=e(this);if(i.prototype[n]&&a.data(i.prototype.name)&&n!="initialize"){a.data(i.prototype.name)[n].apply(a.data(i.prototype.name),Array.prototype.slice.call(t,1))}else if(!n||e.isPlainObject(n)){var s=new i;if(i.prototype["initialize"]){s.initialize.apply(s,e.merge([a],t))}a.data(i.prototype.name,s)}else{e.error("Method "+n+" does not exist on jQuery."+i.name)}})}})(jQuery);