/* Copyright (C) YOOtheme GmbH, http://www.gnu.org/licenses/gpl.html GNU/GPL */

!function(t){function i(t){return $widgetkit.css3(t)}var s="",e=!1,n={transition:e,css3d:e&&"WebKitCSSMatrix"in window&&"m11"in new WebKitCSSMatrix&&!navigator.userAgent.match(/Chrome/i),canvas:function(){var t,i=document.createElement("canvas");return t=!(!i.getContext||!i.getContext("2d")),i=null,t}()},i=function(t){return t=t||{},t.transition&&(t[s+"transition"]=t.transition),t.transform&&(t[s+"transform"]=t.transform),t["transform-origin"]&&(t[s+"transform-origin"]=t["transform-origin"]),t},a=function(){};a.prototype=t.extend(a.prototype,{name:"slideshow",options:{index:0,width:"auto",height:"auto",autoplay:!0,interval:5e3,navbar_items:4,caption_animation_duration:500,kenburns_animation_duration:null,slices:20,duration:500,animated:"random",easing:"swing"},nav:null,navbar:null,captions:null,caption:null,kbi:0,initialize:function(i,s){var e=this;if(this.options=t.extend({},this.options,s),this.element=this.wrapper=i,this.ul=this.wrapper.find("ul.slides:first").css({width:"100%",overflow:"hidden"}),this.wrapper.css({position:"relative"}),this.slides=this.ul.css({position:"relative"}).children().css({top:"0px",left:"0px",position:"absolute"}).hide(),this.index=this.slides[this.options.index]?this.options.index:0,t(".next",this.wrapper).bind("click",function(t){e.stop(),e.nextSlide()}),t(".prev",this.wrapper).bind("click",function(t){e.stop(),e.prevSlide()}),this.wrapper.find(".nav:first").length){this.nav=this.wrapper.find(".nav:first");var a=this.nav.children();a.each(function(i){t(this).bind("click",function(){e.stop(),e.slides[i]&&e.show(i)})}),i.bind("slideshow-show",function(i,s,e){t(a.removeClass("active").get(e)).addClass("active")})}this.wrapper.find(".captions:first").length&&this.wrapper.find(".caption:first").length&&(this.captions=this.wrapper.find(".captions:first").hide().children(),this.caption=this.wrapper.find(".caption:first").hide()),this.nav&&t(this.nav.children().get(this.index)).addClass("active"),this.navbar&&t(this.navbar.children().get(this.index)).addClass("active"),this.showCaption(this.index),this.timer=null,this.hover=!1,this.wrapper.hover(function(){e.hover=!0},function(){e.hover=!1}),"ontouchend"in document&&(i.bind("touchstart",function(s){function e(t){if(r){var i=t.originalEvent.touches?t.originalEvent.touches[0]:t;n={time:(new Date).getTime(),coords:[i.pageX,i.pageY]},Math.abs(r.coords[0]-n.coords[0])>10&&t.preventDefault()}}var n,a=s.originalEvent.touches?s.originalEvent.touches[0]:s,r={time:(new Date).getTime(),coords:[a.pageX,a.pageY],origin:t(s.target)};i.bind("touchmove",e).one("touchend",function(t){i.unbind("touchmove",e),r&&n&&n.time-r.time<1e3&&Math.abs(r.coords[0]-n.coords[0])>30&&Math.abs(r.coords[1]-n.coords[1])<75&&r.origin.trigger("swipe").trigger(r.coords[0]>n.coords[0]?"swipeleft":"swiperight"),r=n=void 0})}),this.wrapper.bind("swipeleft",function(){e.stop(),e.nextSlide()}).bind("swiperight",function(){e.stop(),e.prevSlide()})),t(window).bind("debouncedresize",function(){e.resize()}),e.resize(),e.slides.eq(e.index).css("z-index",2).show(),"kenburns"==e.options.animated&&n.canvas&&e.show(this.index,!0),e.options.autoplay&&e.start()},resize:function(){this.fx&&(this.slicer&&this.slicer.remove(),this.slides.filter(":animated").stop(!0,!0),this.next.css({top:0,left:0,"z-index":2}).show(),"kenburns"==this.options.animated&&n.canvas&&(this.element.find("img:animated").stop().css({width:"",height:"",top:"",left:""}).fadeIn("fast"),this.element.find("canvas.tmp").remove()),this.current.css({top:0,left:0,"z-index":1}).hide()),this.fx=!1;var i=this.options.width,s=this.options.height;this.slides.css("width",""),this.slides.css("height",""),this.ul.css("height",""),this.wrapper.css("width",""),"auto"!=i&&this.wrapper.width()<i&&(i="auto",s="auto"),this.wrapper.css({width:"auto"==i?this.wrapper.width():i});var e=this.ul.width(),a=s;"auto"==a&&(a=0,this.slides.css("width",e).show().each(function(){a=Math.max(a,t(this).height())}).hide().eq(this.index).show()),this.slides.css({height:a,width:this.ul.width()}),this.ul.css("height",a),"kenburns"==this.options.animated&&n.canvas&&this.show(this.index,!0)},nextSlide:function(){this.show(this.slides[this.index+1]?this.index+1:0)},prevSlide:function(){this.show(this.index-1>-1?this.index-1:this.slides.length-1)},show:function(i,s){this.index==i&&!s||this.fx&&"kenburns"!=this.options.animated||(this.current=t(this.slides.get(this.index)),this.next=t(this.slides.get(i)),this.animated=this.options.animated,this.duration=this.options.duration,this.easing=this.options.easing,this.dir=i>this.index?"right":"left",this.init=s,this.showCaption(i),this.element.trigger("slideshow-show",[this.index,i]),this.index=i,this[this.animated]?(this.fx=!0,this[this.animated]()):(this.current.hide(),this.next.show()))},showCaption:function(i){if(this.caption&&this.captions[i]){var s=t(this.captions.get(i)).html();if(this.caption.is(":animated")&&this.caption.stop(),!t.trim(s).length)return void(this.caption.is(":visible")&&this.caption.fadeOut(this.options.caption_animation_duration));if(t.fn.lightbox&&s.match(/data\-lightbox/)&&(s=t("<div>"+s+"</div>"),s.find("a[data-lightbox]").lightbox()),this.caption.is(":visible")){var e=this;this.caption.fadeOut(this.options.caption_animation_duration,function(){t(this).html(s).delay(200).css("opacity","").fadeIn(e.options.caption_animation_duration)})}else this.caption.html(s).fadeIn(this.options.caption_animation_duration)}},start:function(){if(!this.timer){var t=this;this.timer=setInterval(function(){"kenburns"!=t.options.animated&&(t.hover||t.fx)||t.nextSlide()},this.options.interval)}},stop:function(){if(this.timer){clearInterval(this.timer),this.tmptimer&&clearTimeout(this.tmptimer);var t=this;this.tmptimer=setTimeout(function(){t.start(),this.tmptimer=!1},3e4),this.timer=!1}},bindTransitionEnd:function(i){var s=this;t(i).bind("webkitTransitionEnd transitionend oTransitionEnd msTransitionEnd",function(){s.fx=null,s.next.css({"z-index":"2",left:0,top:0}).show(),s.current.hide(),s.slicer&&s.slicer.remove()})},randomSimple:function(){var t=["top","bottom","fade","slide","scroll","swipe"];this.animated=t[Math.floor(Math.random()*t.length)],this[this.animated]()},randomFx:function(){var t=["sliceUp","sliceDown","sliceUpDown","fold","puzzle","boxes","boxesReverse"];this.animated=t[Math.floor(Math.random()*t.length)],this[this.animated]()},top:function(){var t=this;this.current.css({"z-index":1}),this.next.css({"z-index":2,display:"block",left:0,top:this.wrapper.height()*("bottom"==this.animated?2:-1)}).animate({top:0},{duration:t.duration,easing:t.easing,complete:function(){t.fx=null,t.current.hide()}})},bottom:function(){this.top.apply(this)},left:function(){var t=this;this.current.css({"z-index":1}),this.next.css({"z-index":2,display:"block",left:this.current.width()*("right"==this.animated?2:-1)}).animate({left:0},{duration:t.duration,easing:this.easing,complete:function(){t.fx=null,t.current.hide()}})},right:function(){this.left()},slide:function(){var t=this;this.current.css({"z-index":1}),this.next.css({"z-index":2,display:"block",left:this.current.width()*("right"==this.dir?2:-1)}).animate({left:0},{duration:t.duration,easing:this.easing,complete:function(){t.fx=null,t.current.hide()}})},fade:function(){var t=this;this.next.css({top:0,left:0,"z-index":1}).fadeIn(t.duration),this.current.css({"z-index":2}).fadeOut(this.duration,function(){t.fx=null,t.current.hide().css({opacity:1})})},scrollLeft:function(){var t=this;this.current.css({"z-index":1}),this.next.css({"z-index":2,display:"block",left:this.current.width()*("scrollRight"==this.animated?1:-1)}).animate({left:0},{duration:t.duration,easing:this.easing,complete:function(){t.fx=null,t.current.hide()},step:function(i,s){t.current.css("left",(Math.abs(s.start)-Math.abs(i))*("scrollRight"==t.animated?-1:1))}})},scrollRight:function(){this.scrollLeft(this)},scroll:function(){var t=this;this.current.css({"z-index":1}),this.next.css({"z-index":2,display:"block",left:this.current.width()*("right"==this.dir?1:-1)}).animate({left:0},{duration:t.duration,easing:this.easing,complete:function(){t.fx=null,t.current.hide()},step:function(i,s){t.current.css("left",(Math.abs(s.start)-Math.abs(i))*("right"==t.dir?-1:1))}})},swipe:function(){var i=this;this.current.css({"z-index":2}),this.next.css({"z-index":1,top:0,left:this.next.width()/3*("right"==i.dir?1:-1)}).show();var s=t("<div></div>").css({position:"absolute",top:0,left:0,width:this.current.outerWidth(),height:this.current.outerHeight(),opacity:0,"background-color":"#000"}).appendTo(this.current),e=t("<div></div>").css({position:"absolute",top:0,left:0,width:this.current.outerWidth(),height:this.current.outerHeight(),opacity:.6,"background-color":"#000"}).appendTo(this.next);s.animate({opacity:.6},{duration:i.duration}),e.animate({opacity:0},{duration:i.duration}),this.current.animate({left:("right"==i.dir?-1:1)*this.current.width()},{duration:i.duration,easing:"easeOutCubic",complete:function(){i.fx=null,i.current.hide(),s.remove(),e.remove()}}),this.next.animate({left:0},{duration:i.duration,easing:"easeOutCubic"})},slice:function(){var s=this,e=this.next.find("img:first"),a="sliceUp"==this.animated?"bottom":"top";if(!e.length)return this.next.css({"z-index":"2",left:0,top:0}).show(),this.current.hide(),void(this.fx=null);var r=this.current.find("img:first").position(),h=s.next.width(),c=s.next.height();o(this,r.top,r.left);for(var d=Math.round(this.slicer.width()/this.options.slices),l=0;l<this.options.slices;l++){var p=l==this.options.slices-1?this.slicer.width()-d*l:d;"sliceUpDown"==this.animated&&(a=(l%2+2)%2==0?"top":"bottom");var u=t("<div />").css(a,0).css(i({position:"absolute",left:d*l+"px",width:p+"px",height:0,background:"url("+e.attr("src")+") no-repeat -"+(d+l*d-d)+"px "+a,"background-size":h+"px "+c+"px",opacity:0,transition:"all "+s.duration+"ms ease-in "+60*l+"ms"}));this.slicer.append(u)}this.slices=this.slicer.children(),this.bindTransitionEnd.apply(this,[this.slices.get(this.slices.length-1)]),this.current.css({"z-index":1}),this.slicer.show();var f=this.wrapper.height();if(n.transition)this.slices.css(i({height:f,opacity:1}));else{var g=0;this.slices.each(function(i){var e=t(this);setTimeout(function(){e.animate({height:f,opacity:1},s.duration,function(){i==s.slices.length-1&&t(this).trigger("transitionend")})},g),g+=60})}},sliceUp:function(){this.slice.apply(this)},sliceDown:function(){this.slice.apply(this)},sliceUpDown:function(){this.slice.apply(this)},fold:function(){var s=this,e=this.next.find("img:first");if(!e.length)return this.next.css({"z-index":"2",left:0,top:0}).show(),this.current.hide(),void(this.fx=null);var a=this.current.find("img:first").position(),r=s.next.width(),h=s.next.height();o(this,a.top,a.left);for(var c=Math.round(this.slicer.width()/this.options.slices)+2,d=this.current.height(),l=0;l<this.options.slices+1;l++){var p=l==s.options.slices?s.slicer.width()-c*l:c,u=t("<div />").css(i({position:"absolute",left:c*l+"px",width:p,top:"0px",height:d,background:"url("+e.attr("src")+") no-repeat -"+(c+l*c-c)+"px 0%","background-size":r+"px "+h+"px",opacity:0,transform:"scalex(0.0001)",transition:"all "+s.duration+"ms ease-in "+(100+60*l)+"ms"}));this.slicer.append(u)}if(this.slices=this.slicer.children(),this.bindTransitionEnd.apply(this,[this.slices.get(this.slices.length-1)]),this.current.css({"z-index":1}),this.slicer.show(),n.transition)this.slices.css(i({opacity:1,transform:"scalex(1)"}));else{var f=0;this.slices.width(0).each(function(i){var e=i==s.options.slices-1?s.slicer.width()-c*i:c,n=t(this);setTimeout(function(){n.animate({opacity:1,width:e},s.duration,function(){i==s.slices.length-1&&t(this).trigger("transitionend")})},f+100),f+=50})}},puzzle:function(){var s=this,e=Math.round(this.options.slices/2),a=Math.round(this.wrapper.width()/e),h=Math.round(this.wrapper.height()/a),c=Math.round(this.wrapper.height()/h)+1,d=this.next.find("img:first");if(!d.length)return this.next.css({"z-index":"2",left:0,top:0}).show(),this.current.hide(),void(this.fx=null);var l=this.current.find("img:first").position(),p=s.next.width(),u=s.next.height();o(this,l.top,l.left);for(var f=this.wrapper.width(),g=0;g<h;g++)for(var m=0;m<e;m++){var x=t("<div />").css(i({position:"absolute",left:a*m+"px",width:m==e-1?f-a*m+"px":a+"px",top:c*g+"px",height:c+"px",background:"url("+d.attr("src")+") no-repeat -"+(a+m*a-a)+"px -"+(c+g*c-c)+"px","background-size":p+"px "+u+"px",opacity:0,"-webkit-transform":"translateZ(0)","-moz-transform":"rotate(0)",transition:"all "+s.duration+"ms ease-in 0ms"}));this.slicer.append(x)}this.slices=r(this.slicer.children()),this.bindTransitionEnd.apply(this,[this.slices.get(this.slices.length-1)]),this.current.css({"z-index":1}),this.slicer.show(),this.slices.each(function(e){var a=t(this);setTimeout(function(){n.transition?a.css(i({opacity:1})):a.animate({opacity:1},s.duration,function(){e==s.slices.length-1&&t(this).trigger("transitionend")})},100+50*e)})},boxes:function(){var s=this,e=Math.round(this.options.slices/2),a=Math.round(this.wrapper.width()/e),r=Math.round(this.wrapper.height()/a),h=Math.round(this.wrapper.height()/r)+1,c=0,d=this.next.find("img:first");if(!d.length)return this.next.css({"z-index":"2",left:0,top:0}).show(),this.current.hide(),void(this.fx=null);var l=this.current.find("img:first").position(),p=s.next.width(),u=s.next.height();o(this,l.top,l.left);for(var f=0;f<r;f++)for(var g=0;g<e;g++)this.slicer.append(t("<div />").css(i({position:"absolute",left:a*g+"px",width:0,top:h*f+"px",height:0,background:"url("+d.attr("src")+") no-repeat -"+(a+g*a-a)+"px -"+(h+f*h-h)+"px","background-size":p+"px "+u+"px",opacity:0,transition:"all "+(100+s.duration)+"ms ease-in 0ms"})).data("base",{width:g==e-1?this.wrapper.width()-a*g:a,height:h}));this.slices=this.slicer.children(),this.current.css({"z-index":1}),this.slicer.show();var m=0,x=0,w=[];w[m]=[];var v="boxesReverse"==this.animated?this.slices._reverse():this.slices;this.bindTransitionEnd.apply(this,[v.get(v.length-1)]),v.each(function(){w[m][x]=t(this),x++,x==e&&(m++,x=0,w[m]=[])});for(var b=0,g=0;g<e*r;g++){for(var y=g,f=0;f<r;f++)y>=0&&y<e&&(!function(i,e,a,r,o){var h=w[i][e];setTimeout(function(){n.transition?h.css({opacity:"1",width:h.data("base").width,height:h.data("base").height}):h.animate({opacity:"1",width:h.data("base").width,height:h.data("base").height},s.duration,function(){r==s.slices.length-1&&t(this).trigger("transitionend")})},100+a)}(f,y,c,b,v.length),b++),y--;c+=100}},boxesReverse:function(){this.boxes.apply(this)},kenburns:function(){var i=this,s=this.next.find("img:first"),e=i.options.kenburns_animation_duration||2*i.options.interval;if(!s.length)return this.next.css({"z-index":"2",left:0,top:0}).show(),this.current.hide(),void(this.fx=null);if(!n.canvas)return void this.fade(this);s.stop(!1,!0).css({width:"",height:"","max-width":"none"}),this.slides.not(this.current).not(this.next).hide(),this.current.css({"z-index":1}),this.next.css({"z-index":2,visibility:"hidden",opacity:1}).show(),this.next.find("canvas.tmp").remove();var a=(s.position(),s.attr("width")),r=s.attr("height"),o=[{start:["c-l",1],stop:["c-r",1.2]},{start:["t-r",1],stop:["b-l",1.2]},{start:["b-l",1],stop:["t-r",1.2]},{start:["t-c",1],stop:["b-c",1.2]},{start:["c-c",1],stop:["c-c",1.2]},{start:["b-r",1],stop:["t-l",1.2]},{start:["c-l",1],stop:["c-r",1.2]}],h=o[this.kbi?this.kbi:0],c=t('<canvas class="tmp"></canvas>'),d=function(t,i){var i=i||1,s={top:0,left:0,width:a*i,height:r*i};switch(t){case"t-l":s.top=s.left=0;break;case"t-c":s.top=0,s.left=-1*((s.width-a)/2);break;case"t-r":s.top=0,s.left=-1*(s.width-a);break;case"c-l":s.top=-1*((s.height-r)/2),s.left=0;break;case"c-c":s.top=-1*((s.height-r)/2),s.left=-1*((s.width-a)/2);break;case"c-r":s.top=-1*((s.height-r)/2),s.left=-1*(s.width-a);break;case"b-l":s.top=-1*(s.height-r),s.left=0;break;case"b-c":s.top=-1*(s.height-r),s.left=-1*((s.width-a)/2);break;case"b-r":s.top=-1*(s.height-r),s.left=-1*(s.width-a)}return s};if(a>this.ul.width()){var l=a/this.ul.width();a=this.ul.width(),r/=l,this.ul.height(r).css("overflow","hidden").css("z-index","4")}c.attr({width:a,height:r}).css({width:a,height:r,opacity:0}),s.css({width:"",height:"",top:"",left:""}).after(c).hide();var p=c.get(0).getContext("2d");this.next.css({visibility:"visible"}),c.animate({opacity:1},i.duration);var u=!1,f=!1,g=!1,m=!1;s.css(d.apply(this,h.start)).animate(d.apply(this,h.stop),{step:function(t,i){u!==!1&&f!==!1&&g!==!1&&m!==!1&&(p.drawImage(s.get(0),u,f,g,m),u=!1,f=!1,g=!1,m=!1),"width"==i.prop&&(g=t),"height"==i.prop&&(m=t),"left"==i.prop&&(u=t),"top"==i.prop&&(f=t)},complete:function(){t(this).css({width:"",height:"",top:"",left:""}),i.fx=null},easing:"swing",duration:e}),i.kbi=o[i.kbi+1]?i.kbi+1:0},scale:function(){var s=this;return n.transition?(this.fx=null,this.ul.css({"-webkit-transform":"translateZ(0)"}),this.slides.css(i({transition:"none",transform:"none",opacity:1})),this.slides.not(this.current).hide(),this.current.one("webkitTransitionEnd transitionend oTransitionEnd msTransitionEnd",function(){s.next.css({"z-index":"2",left:0,top:0,opacity:1}).show(),t(this).hide().css(i({transition:"none",transform:"none",opacity:1}))}).css(i({"z-index":2,opacity:1,transform:"scale(1)",transition:"all "+s.duration+"ms ease-in-out 0ms"})),this.next.css(i({"z-index":1,opacity:1,transform:"none"})).show(),void s.current.css({"z-index":2}).css(i({opacity:0,transform:"scale(1.5)"}))):void this.fade(this)},rotate:function(){if(!n.transition)return void this.fade(this);this.fx=null;var t=this,s=this.current,e=[["rotate(90deg) translate(200%, -10%) scale(0.2)","rotate(-90deg) translate(-200%, -10%) scale(0.2)"],["rotate(-90deg) translate(-200%, -10%) scale(0.2)","rotate(90deg) translate(200%, -10%) scale(0.2)"],["rotate(-90deg) translate(200%, -90%) scale(0.2)","rotate(90deg) translate(-200%, -90%) scale(0.2)"],["rotate(90deg) translate(-200%, -90%) scale(0.2)","rotate(-90deg) translate(200%, -90%) scale(0.2)"],["rotate(90deg) translate(200%, -10%) scale(0.2)","rotate(90deg) translate(-200%, -90%) scale(0.2)"],["rotate(-90deg) translate(-200%, -10%) scale(0.2)","rotate(-90deg) translate(200%, -90%) scale(0.2)"],["rotate(90deg) translate(-200%, -90%) scale(0.2)","rotate(90deg) translate(200%, -10%) scale(0.2)"],["rotate(-90deg) translate(200%, -90%) scale(0.2)","rotate(-90deg) translate(-200%, -10%) scale(0.2)"],["rotate(10deg) translate(200%, 20%) scale(0.2)","rotate(10deg) translate(-200%, -20%) scale(0.2)"],["rotate(10deg) translate(-200%, -20%) scale(0.2)","rotate(10deg) translate(200%, 20%) scale(0.2)"],["rotate(-10deg) translate(200%, -20%) scale(0.2)","rotate(-10deg) translate(-200%, 20%) scale(0.2)"],["rotate(-10deg) translate(-200%, 20%) scale(0.2)","rotate(-10deg) translate(200%, -20%) scale(0.2)"],["translate(50%, 200%) scale(0.2)","translate(-50%, -200%) scale(0.2)"],["translate(-50%, -200%) scale(0.2)","translate(50%, 200%) scale(0.2)"],["translate(50%, -200%) scale(0.2)","translate(-50%, 200%) scale(0.2)"],["translate(-50%, 200%) scale(0.2)","translate(50%, -200%) scale(0.2)"]],a=parseInt(Math.random()*e.length);this.slides.not(this.current).hide(),this.current.css({"z-index":1}).css(i({opacity:1,transform:"rotate(0deg) translate(0, 0) scale(1)",transition:"all "+this.duration+"ms ease-in-out 0ms"})),this.next.css(i({"z-index":"2",left:0,top:0,opacity:0,transform:e[a][0],transition:"all "+this.duration+"ms ease-in-out 0ms"})).show(),this.next.one("webkitTransitionEnd transitionend oTransitionEnd msTransitionEnd",function(){t.slides.filter(":visible").css(i({transition:"",transform:""})),s.css(i({transition:"",transform:""})).hide()}),setTimeout(function(){t.next.css(i({opacity:1,transform:"rotate(0deg) translate(0, 0) scale(1)"})),t.current.css(i({opacity:0,transform:e[a][1]}))},10)}}),t.fn._reverse=[].reverse;var r=function(t){for(var i,s,e=t.length;e;i=parseInt(Math.random()*e),s=t[--e],t[e]=t[i],t[i]=s);return t},o=function(i,s,e){var s=s||0,e=e||0;i.slicer=t("<li />").addClass("slices").css({top:s,left:e,position:"absolute",width:i.wrapper.width(),height:i.ul.height(),"z-index":3}).hide().appendTo(i.ul)};t.fn[a.prototype.name]=function(){var i=arguments,s=i[0]?i[0]:null;return this.each(function(){var e=t(this);if(a.prototype[s]&&e.data(a.prototype.name)&&"initialize"!=s)e.data(a.prototype.name)[s].apply(e.data(a.prototype.name),Array.prototype.slice.call(i,1));else if(!s||t.isPlainObject(s)){var n=new a;a.prototype.initialize&&n.initialize.apply(n,t.merge([e],i)),e.data(a.prototype.name,n)}else t.error("Method "+s+" does not exist on jQuery."+a.name)})}}(jQuery);